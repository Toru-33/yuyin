# 🔑 API配置指南

## 🚨 问题解决：语音服务时长不足

如果您遇到以下错误：
```
音频服务时长不足。您剩余的可用服务时长不足
```

请按照以下步骤解决：

## 📋 第一步：领取科大讯飞语音转写服务

### 1. 访问科大讯飞开放平台
- 网址：https://www.xfyun.cn/
- 使用您的账号登录（如无账号请先注册）

### 2. 领取语音转写服务
- 访问语音转写服务页面：http://www.xfyun.cn/services/lfasr
- 点击 **"免费领取"** 按钮
- 选择 **"标准版"**（适合大部分视频）
- 确认领取免费时长（通常每月可获得几小时）

### 3. 获取API密钥
1. 进入 **控制台** → **我的应用**
2. 找到或创建 **"语音转写"** 应用
3. 记录以下信息：
   - **APPID**：应用标识
   - **Secret Key**：应用密钥

## 🔧 第二步：更新项目配置

### 需要更新的文件

以下文件中包含API配置，需要替换为您的密钥：

#### 1. video_to_txt.py
```python
api = voice_get_text.RequestApi(
    appid="您的APPID",  # 替换这里
    secret_key="您的Secret_Key",  # 替换这里
    upload_file_path=video_path
)
```

#### 2. Testvideo_to_txt.py
同样需要更新 appid 和 secret_key

#### 3. 其他可能需要更新的文件
- 检查项目中其他调用语音识别的模块
- 确保所有地方都使用了正确的API密钥

## ⚙️ 第三步：验证配置

### 检查服务状态
1. 登录科大讯飞控制台
2. 查看 **语音转写服务** 的剩余时长
3. 确认服务状态为 **"正常"**

### 测试配置
运行以下命令测试配置是否正确：
```bash
python Testvideo_to_txt.py
```

## 📊 服务使用说明

### 免费额度
- **标准版**：每月免费时长（具体额度查看控制台）
- **计费方式**：按音频时长计费
- **音频限制**：单个文件最大5小时

### 音频要求
- **格式**：支持 WAV、MP3、M4A 等
- **采样率**：建议16kHz
- **声道数**：单声道或立体声
- **音质**：清晰无背景噪音效果最佳

## 🔍 常见问题

### Q1: 如何查看剩余时长？
A: 登录控制台 → 语音转写 → 查看服务概览

### Q2: 免费时长用完了怎么办？
A: 可以购买付费时长包，或等待下月免费额度刷新

### Q3: API配置错误如何排查？
A: 检查APPID和Secret Key是否正确，确认服务是否已开通

### Q4: 为什么识别准确率不高？
A: 建议使用高质量音频，减少背景噪音，清晰发音

## 📞 技术支持

如有问题，可以：
1. 查看科大讯飞官方文档：https://doc.xfyun.cn/
2. 联系科大讯飞技术支持
3. 在项目GitHub上提交Issue

---

**注意**：请妥善保管您的API密钥，不要泄露给他人！ 