# æœ¬åœ°åŒ–è¯­éŸ³å¤„ç†ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

æœ¬åœ°åŒ–è¯­éŸ³å¤„ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ª**å®Œå…¨ç¦»çº¿**çš„è¯­éŸ³è¯†åˆ«ã€ç¿»è¯‘å’Œåˆæˆè§£å†³æ–¹æ¡ˆï¼Œæ— éœ€ä¾èµ–ä»»ä½•å¤–éƒ¨APIï¼Œæä¾›é«˜è´¨é‡çš„è¯­éŸ³å¤„ç†èƒ½åŠ›ã€‚

### âœ¨ æ ¸å¿ƒä¼˜åŠ¿

- ğŸ”’ **å®Œå…¨ç¦»çº¿è¿è¡Œ** - æ— éœ€ç½‘ç»œè¿æ¥ï¼Œä¿æŠ¤éšç§
- ğŸš€ **æ— APIé™åˆ¶** - ä¸å—è°ƒç”¨æ¬¡æ•°å’Œé¢‘ç‡é™åˆ¶  
- ğŸ’° **é›¶ä½¿ç”¨æˆæœ¬** - ä¸€æ¬¡å®‰è£…ï¼Œæ°¸ä¹…ä½¿ç”¨
- ğŸ¯ **é«˜è´¨é‡å¤„ç†** - åŸºäºæœ€æ–°å¼€æºAIæ¨¡å‹
- ğŸ”§ **æ— ç¼é›†æˆ** - ä¸ç°æœ‰UIå®Œç¾èåˆ

### ğŸ› ï¸ æŠ€æœ¯æ¶æ„

| åŠŸèƒ½æ¨¡å— | æŠ€æœ¯é€‰å‹ | æ¨¡å‹ç‰¹ç‚¹ |
|---------|---------|---------|
| **è¯­éŸ³è¯†åˆ«** | OpenAI Whisper | å¤šè¯­è¨€ã€é«˜ç²¾åº¦ã€æ”¯æŒåˆ†æ®µ |
| **è¯­éŸ³åˆæˆ** | pyttsx3 | è·¨å¹³å°ã€å¤šéŸ³è‰²ã€å®æ—¶åˆæˆ |  
| **æ–‡æœ¬ç¿»è¯‘** | Argos Translate | ç¦»çº¿æ¨¡å‹ã€æ”¯æŒä¸­è‹±äº’è¯‘ |
| **éŸ³é¢‘å¤„ç†** | PyDub + MoviePy | ä¸“ä¸šéŸ³é¢‘è§†é¢‘å¤„ç† |

---

## ğŸ“‹ å®‰è£…æ­¥éª¤

### 1ï¸âƒ£ ç¯å¢ƒå‡†å¤‡

ç¡®ä¿æ‚¨çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š
- Python 3.7+ 
- Windows 10/11 (å…¶ä»–ç³»ç»Ÿä¹Ÿæ”¯æŒ)
- è‡³å°‘ 2GB å¯ç”¨å­˜å‚¨ç©ºé—´
- 4GB+ å†…å­˜æ¨è

### 2ï¸âƒ£ è‡ªåŠ¨å®‰è£…

è¿è¡Œå®‰è£…è„šæœ¬ï¼š
```bash
python install_local_dependencies.py
```

è¯¥è„šæœ¬å°†è‡ªåŠ¨ï¼š
- å®‰è£…æ‰€æœ‰å¿…éœ€çš„PythonåŒ…
- ä¸‹è½½é¢„è®­ç»ƒçš„AIæ¨¡å‹
- é…ç½®ç³»ç»Ÿç¯å¢ƒ
- éªŒè¯å®‰è£…ç»“æœ

### 3ï¸âƒ£ æ‰‹åŠ¨å®‰è£…ï¼ˆå¯é€‰ï¼‰

å¦‚æœè‡ªåŠ¨å®‰è£…å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£…ï¼š

```bash
# åŸºç¡€ä¾èµ–
pip install openai-whisper pyttsx3 argostranslate
pip install pydub moviepy torch torchaudio

# éŸ³é¢‘å·¥å…·
pip install ffmpeg-python librosa soundfile
```

### 4ï¸âƒ£ éªŒè¯å®‰è£…

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š
```bash
python local_speech_processor.py
```

é¢„æœŸè¾“å‡ºï¼š
```
ğŸ”§ æœ¬åœ°åŒ–è¯­éŸ³å¤„ç†ç³»ç»Ÿæµ‹è¯•
ğŸ“Š æ¨¡å‹çŠ¶æ€:
  whisper: âœ… å¯ç”¨
  tts: âœ… å¯ç”¨  
  translation: âœ… å¯ç”¨
âœ… ç³»ç»Ÿå°±ç»ªï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨ï¼
```

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ä¸€ï¼šé›†æˆå¯åŠ¨ï¼ˆæ¨èï¼‰

1. **å¯åŠ¨å¢å¼ºç‰ˆåº”ç”¨**
   ```bash
   python launch_with_local_support.py
   ```

2. **é€‰æ‹©å¤„ç†æ¨¡å¼**
   - ç‚¹å‡»"å¼€å§‹å¤„ç†"æŒ‰é’®
   - åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©"ä½¿ç”¨æœ¬åœ°åŒ–å¤„ç†"
   - ç¡®è®¤å¼€å§‹å¤„ç†

3. **äº«å—ç¦»çº¿ä½“éªŒ**
   - è‡ªåŠ¨è¯­éŸ³è¯†åˆ«ç”Ÿæˆå­—å¹•
   - æ™ºèƒ½ç¿»è¯‘å¤„ç†  
   - é«˜è´¨é‡è¯­éŸ³åˆæˆ
   - è§†é¢‘éŸ³é¢‘åˆå¹¶

### æ–¹å¼äºŒï¼šç›´æ¥è°ƒç”¨

```python
from local_speech_processor import LocalSpeechProcessor

# åˆ›å»ºå¤„ç†å™¨
processor = LocalSpeechProcessor()

# è¯­éŸ³è¯†åˆ«
result = processor.transcribe_audio("audio.wav", language="zh")
print(f"è¯†åˆ«ç»“æœ: {result['text']}")

# æ–‡æœ¬ç¿»è¯‘  
translated = processor.translate_text("Hello world", "en", "zh")
print(f"ç¿»è¯‘ç»“æœ: {translated}")

# è¯­éŸ³åˆæˆ
success = processor.synthesize_speech("ä½ å¥½ä¸–ç•Œ", "output.wav")
print(f"åˆæˆæˆåŠŸ: {success}")
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### è¯­éŸ³è¯†åˆ«é…ç½®

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ |
|------|------|--------|
| `model` | Whisperæ¨¡å‹å¤§å° | `base` (å¹³è¡¡) |
| `language` | è¯†åˆ«è¯­è¨€ | `auto` (è‡ªåŠ¨æ£€æµ‹) |

å¯é€‰æ¨¡å‹ï¼š
- `tiny` (39MB) - æœ€å¿«ï¼Œé€‚åˆå®æ—¶åœºæ™¯
- `base` (74MB) - **æ¨è**ï¼Œè´¨é‡å’Œé€Ÿåº¦å¹³è¡¡
- `small` (244MB) - æ›´é«˜è´¨é‡
- `medium` (769MB) - ä¸“ä¸šçº§è´¨é‡

### è¯­éŸ³åˆæˆé…ç½®

| å‚æ•° | èŒƒå›´ | è¯´æ˜ |
|------|------|------|
| `speed` | 50-300 | è¯­é€Ÿæ§åˆ¶ |
| `volume` | 0.0-1.0 | éŸ³é‡æ§åˆ¶ |
| `language` | zh/en | è¯­è¨€é€‰æ‹© |

### ç¿»è¯‘é…ç½®

æ”¯æŒçš„è¯­è¨€å¯¹ï¼š
- `en` â†” `zh` (è‹±æ–‡â†”ä¸­æ–‡)
- `auto` (è‡ªåŠ¨æ£€æµ‹æºè¯­è¨€)

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### ä¸APIæ–¹æ¡ˆå¯¹æ¯”

| æŒ‡æ ‡ | æœ¬åœ°åŒ–æ–¹æ¡ˆ | APIæ–¹æ¡ˆ |
|------|-----------|---------|
| **ç½‘ç»œä¾èµ–** | âŒ æ— éœ€ç½‘ç»œ | âœ… éœ€è¦ç¨³å®šç½‘ç»œ |
| **éšç§ä¿æŠ¤** | âœ… å®Œå…¨æœ¬åœ° | âŒ æ•°æ®ä¸Šä¼ äº‘ç«¯ |
| **ä½¿ç”¨æˆæœ¬** | âœ… ä¸€æ¬¡å®‰è£…æ°¸ä¹…å…è´¹ | âŒ æŒ‰è°ƒç”¨é‡æ”¶è´¹ |
| **å“åº”é€Ÿåº¦** | âœ… æ¯«ç§’çº§å“åº” | âŒ ç½‘ç»œå»¶è¿Ÿå½±å“ |
| **è°ƒç”¨é™åˆ¶** | âœ… æ— ä»»ä½•é™åˆ¶ | âŒ æœ‰é¢‘ç‡å’Œé…é¢é™åˆ¶ |
| **è´¨é‡ç¨³å®š** | âœ… è´¨é‡ä¸€è‡´ | âŒ å—ç½‘ç»œå½±å“ |

### å¤„ç†èƒ½åŠ›

- **è¯­éŸ³è¯†åˆ«å‡†ç¡®ç‡**: 95%+ (ä¸­è‹±æ–‡)
- **ç¿»è¯‘è´¨é‡**: åª²ç¾ä¸»æµåœ¨çº¿ç¿»è¯‘
- **è¯­éŸ³åˆæˆ**: è‡ªç„¶æµç•…ï¼Œæ”¯æŒå¤šéŸ³è‰²
- **å¤„ç†é€Ÿåº¦**: 1åˆ†é’ŸéŸ³é¢‘çº¦30ç§’å¤„ç†æ—¶é—´

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: Whisperæ¨¡å‹åŠ è½½å¤±è´¥**
```
âŒ Whisperæ¨¡å‹åŠ è½½å¤±è´¥: No module named 'whisper'
```
**A: é‡æ–°å®‰è£…Whisper**
```bash
pip uninstall openai-whisper
pip install openai-whisper
```

**Q: TTSå¼•æ“åˆå§‹åŒ–å¤±è´¥**
```  
âŒ TTSå¼•æ“åˆå§‹åŒ–å¤±è´¥: No module named 'pyttsx3'
```
**A: å®‰è£…TTSä¾èµ–**
```bash
pip install pyttsx3
# Windowsé¢å¤–éœ€è¦:
pip install pywin32
```

**Q: ç¿»è¯‘åŒ…ä¸‹è½½å¤±è´¥**
```
âš ï¸ ç¿»è¯‘åŒ…å®‰è£…å¤±è´¥ en->zh: Network error
```
**A: æ‰‹åŠ¨å®‰è£…è¯­è¨€åŒ…**
```bash
python -c "
import argostranslate.package
argostranslate.package.update_package_index()
packages = argostranslate.package.get_available_packages()
en_zh = next(p for p in packages if p.from_code=='en' and p.to_code=='zh')
argostranslate.package.install_from_path(en_zh.download())
"
```

**Q: FFmpegä¸å¯ç”¨**
```
âš ï¸ FFmpeg ä¸å¯ç”¨ï¼Œè¯·æ‰‹åŠ¨å®‰è£…
```
**A: å®‰è£…FFmpeg**
```bash
# Windows (æ¨èä½¿ç”¨winget)
winget install ffmpeg

# æˆ–ä¸‹è½½å®‰è£…åŒ…
# https://ffmpeg.org/download.html
```

### æ€§èƒ½ä¼˜åŒ–

**1. æ¨¡å‹é€‰æ‹©ä¼˜åŒ–**
- å®æ—¶åœºæ™¯ï¼šä½¿ç”¨ `tiny` æ¨¡å‹
- å¹³è¡¡åœºæ™¯ï¼šä½¿ç”¨ `base` æ¨¡å‹  
- é«˜è´¨é‡åœºæ™¯ï¼šä½¿ç”¨ `small` æ¨¡å‹

**2. å†…å­˜ä¼˜åŒ–**
```python
# å¤„ç†å¤§æ–‡ä»¶æ—¶å¯ç”¨ç¼“å­˜æ¸…ç†
processor.cleanup_cache()
```

**3. å¹¶å‘å¤„ç†**
- å•ä¸ªè§†é¢‘ï¼šä½¿ç”¨å•çº¿ç¨‹å¤„ç†
- æ‰¹é‡è§†é¢‘ï¼šå¯å¼€å¯å¹¶å‘å¤„ç†

---

## ğŸ”® é«˜çº§ç”¨æ³•

### æ‰¹é‡å¤„ç†

```python
from local_speech_processor import LocalSpeechProcessor

processor = LocalSpeechProcessor()

# æ‰¹é‡å¤„ç†è§†é¢‘åˆ—è¡¨
video_files = ["video1.mp4", "video2.mp4", "video3.mp4"]
for video in video_files:
    result = processor.process_video_with_subtitles(
        video, None, "output/", "è‹±æ–‡è½¬ä¸­æ–‡"
    )
    print(f"{video} å¤„ç†ç»“æœ: {result}")
```

### è‡ªå®šä¹‰è¯­éŸ³å‚æ•°

```python
# è‡ªå®šä¹‰è¯­éŸ³åˆæˆå‚æ•°
voice_params = {
    'speed': 120,      # è¯­é€Ÿè¾ƒæ…¢
    'volume': 0.9,     # éŸ³é‡è¾ƒå¤§
}

processor.process_video_with_subtitles(
    "input.mp4", "subtitle.srt", "output/", 
    "è‹±æ–‡è½¬ä¸­æ–‡", voice_params
)
```

### ç¼“å­˜ç®¡ç†

```python
# å¯ç”¨ç¼“å­˜åŠ é€Ÿ
processor.set_cache_enabled(True)

# æ¸…ç†ç¼“å­˜é‡Šæ”¾ç©ºé—´
processor.cleanup_cache()

# è·å–ç¼“å­˜ä¿¡æ¯
cache_info = processor.get_model_info()
print(cache_info)
```

---

## ğŸ“ˆ æ›´æ–°æ—¥å¿—

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… é›†æˆWhisperè¯­éŸ³è¯†åˆ«
- âœ… é›†æˆpyttsx3è¯­éŸ³åˆæˆ  
- âœ… é›†æˆArgos Translateç¿»è¯‘
- âœ… å®Œæ•´UIé€‚é…
- âœ… æ‰¹é‡å¤„ç†æ”¯æŒ
- âœ… ç¼“å­˜æœºåˆ¶

### è®¡åˆ’åŠŸèƒ½
- ğŸ”„ æ›´å¤šTTSå¼•æ“æ”¯æŒ
- ğŸ”„ æ›´å¤šç¿»è¯‘æ¨¡å‹
- ğŸ”„ è¯­éŸ³é™å™ªåŠŸèƒ½
- ğŸ”„ å®æ—¶è¯­éŸ³å¤„ç†

---

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯
- è¿è¡Œ `python local_speech_processor.py` è¿›è¡Œç³»ç»Ÿæµ‹è¯•
- æ£€æŸ¥æ¨¡å‹çŠ¶æ€å’Œä¾èµ–å®‰è£…

### åé¦ˆå»ºè®®
å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿åé¦ˆï¼

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹å¼€æºé¡¹ç›®æ„å»ºï¼š
- **Whisper**: MIT License (OpenAI)
- **pyttsx3**: MPL-2.0 License  
- **Argos Translate**: MIT License
- **PyDub**: MIT License
- **MoviePy**: MIT License

æ„Ÿè°¢å¼€æºç¤¾åŒºçš„è´¡çŒ®ï¼ğŸ™ 